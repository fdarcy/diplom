# I Перечень автоматизируемых сценариев

## 1. Отправка формы. Проверяем в двух СУБД - MySQL и PostgreSQL.

**Требования к содержимому полей (валидные данные):**

- номер карты - состоит из 16 цифр
- месяц - в формате мм, значения от 01 до 12
- год - в формате гг, не раньше текущего года
- cvc/cvv код карты - состоит из 3 цифр
- имя и фамилия владельца карты - латиница через пробел, может содержать "-"

 
### 001 Отправка формы с использованием данных одобренной карты  

**Payment gate**  
Предусловие 
Открыт сервис покупки тура: http://localhost:8080/, выбрана вкладка "купить"
Шаги

1. В поле номер карты ввести номер одобренной карты - "4444 4444 4444 4441"
2. В поле месяц ввести валидный месяц - "02"
3. В поле год ввести валидный год - "25"
4. В поле владелец ввести валидные данные владельца - "Ivan Ivanov"
5. В поле cvc/cvv ввести валидный номер cvc/cvv - 123
6. Нажать на кнопку "Продолжить"

Ожидаемый результат  
Запрос отправлен, на странице появилось сообщение: "Успешно. Операция одобрена Банком."

**Credit gate**  
Предусловие
Открыт сервис покупки тура: http://localhost:8080/, выбрана вкладка "купить в кредит"
Шаги
1. В поле номер карты ввести номер одобренной карты - "4444 4444 4444 4441"
2. В поле месяц ввести валидный месяц - "02"
3. В поле год ввести валидный год - "25"
4. В поле владелец ввести валидные данные владельца - "Ivan Ivanov"
5. В поле cvc/cvv ввести валидный номер cvc/cvv - 123
6. Нажать на кнопку "Продолжить"

Ожидаемый результат  
Запрос отправлен, на странице появилось сообщение: "Успешно. Операция одобрена Банком."

### 002 Отправка формы с использованием данных отклоненной карты  

**Payment gate**  
Предусловие
Открыт сервис покупки тура: http://localhost:8080/, выбрана вкладка "купить"
Шаги
1. В поле номер карты ввести номер отклоненной карты - "4444 4444 4444 4442"
2. В поле месяц ввести валидный месяц - "02"
3. В поле год ввести валидный год - "25"
4. В поле владелец ввести валидные данные владельца - "Ivan Ivanov"
5. В поле cvc/cvv ввести валидный номер cvc/cvv - 123
6. Нажать на кнопку "Продолжить"

Ожидаемый результат  
Запрос не отправлен, на странице появилось сообщение об ошибке  

**Credit gate**  
Предусловие
Открыт сервис покупки тура: http://localhost:8080/, выбрана вкладка "купить в кредит"
Шаги
1. В поле номер карты ввести номер отклоненной карты - "4444 4444 4444 4442"
2. В поле месяц ввести валидный месяц - "02"
3. В поле год ввести валидный год - "25"
4. В поле владелец ввести валидные данные владельца - "Ivan Ivanov"
5. В поле cvc/cvv ввести валидный номер cvc/cvv - 123
6. Нажать на кнопку "Продолжить"

Ожидаемый результат  
Запрос не отправлен, на странице появилось сообщение об ошибке 

### 003 Отправка формы с использованием данных "неверной" карты

**Payment gate**  
Предусловие
Открыт сервис покупки тура: http://localhost:8080/, выбрана вкладка "купить"
Шаги
1. В поле номер карты ввести номер неверной карты - "4444 4444 4444 4443"
2. В поле месяц ввести месяц - "02"
3. В поле год ввести год - "25"
4. В поле владелец ввести данные владельца - "Ivan Ivanov"
5. В поле cvc/cvv ввести номер cvc/cvv - 123
6. Нажать на кнопку "Продолжить"

Ожидаемый результат  
Запрос не отправлен, на странице появилось сообщение об ошибке: "Ошибка! банк отказал в проведении операции."  

**Credit gate**
Предусловие
Открыт сервис покупки тура: http://localhost:8080/, выбрана вкладка "купить в кредит"
Шаги
1. В поле номер карты ввести номер неверной карты - "4444 4444 4444 4443"
2. В поле месяц ввести месяц - "02"
3. В поле год ввести год - "25"
4. В поле владелец ввести данные владельца - "Ivan Ivanov"
5. В поле cvc/cvv ввести номер cvc/cvv - 123
6. Нажать на кнопку "Продолжить"

Ожидаемый результат  
Запрос не отправлен, на странице появилось сообщение об ошибке: "Ошибка! банк отказал в проведении операции."

## 2. Валидация полей перед отправкой. Проверяем дважды (Payment gate и Credit gate) 

### 1) Поле "номер карты"  

### 004 Внесение в поле "номер карты" пустого значения  
Шаги
1. Оставить поле пустым - ""  
Ожидаемый результат  
Ошибка: "Неверный формат", форма не отправляется.  

### 005 Внесение в поле "номер карты" нулей
Шаги
1. В поле номер карты ввести нули - "0000 0000 0000 0000"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.  

### 006 Внесение в поле "номер карты" букв
Шаги
1. В поле номер карты ввести буквы - "ftgujkhhj"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.  

### 007 Внесение в поле "номер карты" спецсимволов
Шаги
1. В поле номер карты ввести спецсимволы - "4444 #$^% (&%^ 1111"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.  

### 008 Внесение в поле "номер карты" 17 цифр
Шаги
1. В поле номер карты ввести 17 цифр - "4444 4444 44444 4444"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.  

### 009 Внесение в поле "номер карты" 15 цифр
Шаги
1. В поле номер карты ввести 15 цифр - "4444 4444 4444 444"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.  

### 010 Внесение в поле "номер карты" 1 цифры
Шаги
1. В поле номер карты ввести 1 цифру - "4"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.  

### 011 Внесение в поле "номер карты" 2 цифр
Шаги
1. В поле номер карты ввести 2 цифры - "44"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.  

### 2) Поле "месяц"  

### 012 Внесение в поле "месяц" пустого значения
Шаги
1. Оставить поле пустым - ""  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.  

### 013 Внесение в поле "месяц" букв
Шаги
1. В поле месяц ввести буквы - "п5"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.

### 014 Внесение в поле "месяц" спецсимволов
Шаги
1. В поле месяц ввести спецсимволы - "№;"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.  

### 015 Внесение в поле "месяц" нулей  
Шаги
1. В поле месяц ввести - "00"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется. 

### 016 Внесение в поле "месяц" неверного значения 
Шаги
1. В поле месяц ввести - "13"  
   Ожидаемый результат  
   Ошибка: "Неверно указан срок действия карты", форма не отправляется. 

### 017 Внесение в поле "месяц" валидных граничных значений

1. В поле месяц ввести - "01"  
   Ожидаемый результат  
Форма отправлена.  

2. В поле месяц ввести - "11"  
   Ожидаемый результат  
   Форма отправлена.  

3. В поле месяц ввести - "12"  
   Ожидаемый результат  
   Форма отправлена.

### 3) Поле "год"

### 018 Внесение в поле "год" пустого значения
Шаги
1. Оставить поле пустым - ""  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.

### 019 Внесение в поле "год" букв
Шаги
1. В поле год ввести буквы - "year 2024"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.

### 020 Внесение в поле "год" спецсимволов
Шаги
1. В поле год ввести спецсимволы - "№;"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.  

### 021 Внесение в поле "год" значения из прошлого
Шаги
1. В поле месяц ввести спецсимволы - "23"  
   Ожидаемый результат  
   Ошибка: "Истёк срок действия карты", форма не отправляется.  

### 4) Срок действия карты

### 022 Внесение в поля месяц и год валидных значений  
Шаги  
1. В поле месяц ввести валидный месяц - "04"
2. В поле год ввести валидный год - "24"  
   Ожидаемый результат  
Форма отправлена.  

### 023 Внесение в поля месяц и год даты из прошлого
Шаги
1. В поле месяц ввести месяц - "02"
2. В поле год ввести год - "24"  
   Ожидаемый результат  
   Ошибка: "Неверно указан срок действия карты", форма не отправляется. 

### 024 Внесение в поля месяц и год даты на 10 лет больше текущей даты  
Шаги  
1. В поле месяц ввести валидный месяц - "04"
2. В поле год ввести валидный год - "34"  
   Ожидаемый результат  
   Форма отправлена.

### 025 Внесение в поля месяц и год даты на 10 лет меньше текущей даты
Шаги
1. В поле месяц ввести валидный месяц - "04"
2. В поле год ввести валидный год - "14"
   Ожидаемый результат  
   Ошибка: "Неверно указан срок действия карты", форма не отправляется. 

### 5) Поле "владелец"

### 026 Внесение в поле "владелец" пустого значения
Шаги
1. Оставить поле пустым - ""  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.

### 027 Внесение в поле "владелец" цифр
Шаги
1. В поле владелец ввести цифры - "Ivan123"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.

### 028 Внесение в поле "владелец" спецсимволов
Шаги
1. В поле владелец ввести спецсимволы - "Ivan@#"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.  

### 029 Внесение в поле "владелец" значения на кириллице
Шаги
1. В поле владелец ввести значение на кириллице - "Иван Иванов"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.  

### 030 Внесение в поле "владелец" значения без пробела
Шаги
1. В поле владелец ввести значение - "IvanIvanov"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.

### 031 Внесение в поле "владелец" имени и фамилии через дефис  
Шаги
1. В поле владелец ввести значение - "Ivan-Ivanov"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.

### 032 Внесение в поле "владелец" 1 символа на латинице
Шаги
1. В поле владелец ввести 1 значение - "I"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.

### 033 Внесение в поле "владелец" 2 символов на латинице
Шаги
1. В поле владелец ввести 2 значения - "Iv"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.

### 6) Поле "cvc/cvv"

### 034 Внесение в поле "cvc/cvv" пустого значения
Шаги
1. Оставить поле пустым - ""  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.

### 035 Внесение в поле "cvc/cvv" букв
Шаги
1. В поле cvc/cvv ввести буквы - "asd"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.

### 036 Внесение в поле "cvc/cvv" спецсимволов
Шаги
1. В поле cvc/cvv ввести спецсимволы - "№;%"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.  

### 037 Внесение в поле "cvc/cvv" нулей
Шаги
1. В поле cvc/cvv ввести нули - "000"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.

### 038 Внесение в поле "cvc/cvv" значения из 2х цифр
Шаги
1. В поле cvc/cvv ввести 2 цифры - "12"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.

### 039 Внесение в поле "cvc/cvv" значения из 1 цифры
Шаги
1. В поле cvc/cvv ввести 1 цифру - "1"  
   Ожидаемый результат  
   Ошибка: "Неверный формат", форма не отправляется.

## 3. Взаимодействие с БД. Проверяем в двух СУБД - MySQL и PostgreSQL

### 040 Создание в БД заказа при успешной отправке формы

**Payment gate**   
Предусловие  
В DBeaver подключена БД проекта и открыт раздел "Таблицы"   
Открыт сервис покупки тура: http://localhost:8080/, выбрана вкладка "купить"
Шаги  
1. Ввести валидные данные в форму покупки тура
-  № карты: 4444 44444 4444 4441
- месяц: 02
- год: 25
- владелец: Ivan Ivanov
- cvc/cvv: 123
2. Нажать кнопку "Продолжить"
3. Убедиться, что на экране появилось сообщение: "Успешно. Операция одобрена банком"
4. В DBeaver открыть "order_entity"
   Ожидаемый результат  
В "order_entity" появилась информация о совершенной покупке

**Credit gate**   
Предусловие  
В DBeaver подключена БД проекта и открыт раздел "Таблицы"   
Открыт сервис покупки тура: http://localhost:8080/, выбрана вкладка "купить в кредит"
Шаги  
1. Ввести валидные данные в форму покупки тура
- № карты: 4444 44444 4444 4441
- месяц: 02
- год: 25
- владелец: Ivan Ivanov
- cvc/cvv: 123
2. Нажать кнопку "Продолжить"
3. Убедиться, что на экране появилось сообщение: "Успешно. Операция одобрена банком"
4. В DBeaver открыть "order_entity"
   Ожидаемый результат  
   В "order_entity" появилась информация о совершенной покупке


### 041 Наличие информации о заказе в "payment_entity" после успешной покупки тура. Только в Payment gate  
Предусловие  
В DBeaver подключена БД проекта и открыт раздел "Таблицы"   
Открыт сервис покупки тура: http://localhost:8080/, выбрана вкладка "купить"  
Шаги  
1. Ввести валидные данные в форму покупки тура
- № карты: 4444 44444 4444 4441
- месяц: 02
- год: 25
- владелец: Ivan Ivanov
- cvc/cvv: 123
2. Нажать кнопку "Продолжить"
3. Убедиться, что на экране появилось сообщение: "Успешно. Операция одобрена банком"
4. В DBeaver открыть "payment_entity"  
   Ожидаемый результат  
   В "payment_entity" появилась информация о совершенной покупке (id, сумма, дата, статус)

### 042 Наличие информации о заказе в "credit_request_entity" после успешной покупки тура в кредит. Только в Credit gate
Предусловие  
В DBeaver подключена БД проекта и открыт раздел "Таблицы"   
Открыт сервис покупки тура: http://localhost:8080/, выбрана вкладка "купить в кредит"  
Шаги
1. Ввести валидные данные в форму покупки тура
- № карты: 4444 44444 4444 4441
- месяц: 02
- год: 25
- владелец: Ivan Ivanov
- cvc/cvv: 123
2. Нажать кнопку "Продолжить"
3. Убедиться, что на экране появилось сообщение: "Успешно. Операция одобрена банком"
4. В DBeaver открыть "credit_request_entity"  
   Ожидаемый результат  
   В "credit_request_entity" появилась информация о совершенной покупке (id, сумма, дата, статус)

### 043 Отображение статуса заказа в БД при использовании одобренной карты

**Payment gate**   
Предусловие  
В DBeaver подключена БД проекта и открыт раздел "Таблицы"   
Открыт сервис покупки тура: http://localhost:8080/, выбрана вкладка "купить"
Шаги
1. Ввести данные одобренной карты в форму покупки тура:
- № карты: 4444 44444 4444 4441
- месяц: 02
- год: 25
- владелец: Ivan Ivanov
- cvc/cvv: 123
2. Нажать кнопку "Продолжить"
3. Убедиться, что на экране появилось сообщение: "Успешно. Операция одобрена банком"
4. В DBeaver открыть "payment_entity"
   Ожидаемый результат  
   В "payment_entity" появилась информация о статусе: "APPROVED"

**Credit gate**   
Предусловие  
В DBeaver подключена БД проекта и открыт раздел "Таблицы"   
Открыт сервис покупки тура: http://localhost:8080/, выбрана вкладка "купить в кредит"
Шаги
1. Ввести данные одобренной карты в форму покупки тура:
- № карты: 4444 44444 4444 4441
- месяц: 02
- год: 25
- владелец: Ivan Ivanov
- cvc/cvv: 123
2. Нажать кнопку "Продолжить"
3. Убедиться, что на экране появилось сообщение: "Успешно. Операция одобрена банком"
4. В DBeaver открыть "credit_request_entity"
   Ожидаемый результат  
   В "credit_request_entity" появилась информация о статусе: "APPROVED"

### 044 Отображение статуса заказа в БД при использовании отклоненной карты

**Payment gate**   
Предусловие  
В DBeaver подключена БД проекта и открыт раздел "Таблицы"   
Открыт сервис покупки тура: http://localhost:8080/, выбрана вкладка "купить"
Шаги
1. Ввести данные отклоненной карты в форму покупки тура:
- № карты: 4444 44444 4444 4442
- месяц: 02
- год: 25
- владелец: Ivan Ivanov
- cvc/cvv: 123
2. Нажать кнопку "Продолжить"
3. Убедиться, что на экране появилось сообщение об ошибке
4. В DBeaver открыть "payment_entity"
   Ожидаемый результат  
   В "payment_entity" появилась информация о статусе: "DECLINED"

**Credit gate**   
Предусловие  
В DBeaver подключена БД проекта и открыт раздел "Таблицы"   
Открыт сервис покупки тура: http://localhost:8080/, выбрана вкладка "купить в кредит"
Шаги
1. Ввести данные отклоненной карты в форму покупки тура:
- № карты: 4444 44444 4444 4442
- месяц: 02
- год: 25
- владелец: Ivan Ivanov
- cvc/cvv: 123
2. Нажать кнопку "Продолжить"
3. Убедиться, что на экране появилось сообщение об ошибке
4. В DBeaver открыть "credit_request_entity"
   Ожидаемый результат  
   В "credit_request_entity" появилась информация о статусе: "DECLINED"

### 045 Корректное отображение информации о заказе в разделах "order_entity" и "payment_entity"

**Payment gate**   
Предусловие  
В DBeaver подключена БД проекта и открыт раздел "Таблицы"   
Открыт сервис покупки тура: http://localhost:8080/, выбрана вкладка "купить"
Шаги
1. Ввести данные карты в форму покупки тура:
- № карты: 4444 44444 4444 4441
- месяц: 02
- год: 25
- владелец: Ivan Ivanov
- cvc/cvv: 123
2. Нажать кнопку "Продолжить"
3. Убедиться, что на экране появилось сообщение: "Успешно. Операция одобрена банком"
4. В DBeaver открыть "payment_entity"
5. Посмотреть значение в столбце "id"
6. В DBeaver открыть "order_entity"
7. Посмотреть значение в столбце "payment_id"
8. Сравнить "id" и "payment_id"  
   Ожидаемый результат   
Значение столбца "id" в таблице "payment_entity" совпадает со значением столбца "payment_id" в таблице "order_entity"  

**Credit gate**   
Предусловие  
В DBeaver подключена БД проекта и открыт раздел "Таблицы"   
Открыт сервис покупки тура: http://localhost:8080/, выбрана вкладка "купить в кредит"  
Шаги
1. Ввести данные карты в форму покупки тура:
- № карты: 4444 44444 4444 4441
- месяц: 02
- год: 25
- владелец: Ivan Ivanov
- cvc/cvv: 123
2. Нажать кнопку "Продолжить"
3. Убедиться, что на экране появилось сообщение: "Успешно. Операция одобрена банком"
4. В DBeaver открыть "credit_request_entity"
5. Посмотреть значение в столбце "id"
6. В DBeaver открыть "order_entity"
7. Посмотреть значение в столбце "payment_id"
8. Сравнить "id" и "payment_id"  
   Ожидаемый результат   
   Значение столбца "id" в таблице "payment_entity" совпадает со значением столбца "payment_id" в таблице "order_entity" 


